# Поиск элемента на скриншоте и управление компьютером

Этот проект содержит скрипты, которые находят заданный элемент на скриншоте и управляют компьютером с помощью AI.

## Описание

### 1. Поиск элемента на скриншоте (find_element.py)

Скрипт применяет рекурсивный алгоритм деления изображения на части для поиска элемента:

1. Разбивает скриншот на 8 равных частей
2. Ищет элемент в каждой части, используя OpenAI Vision API
3. Когда находит часть, в которой есть элемент, остальные части не проверяет
4. Сохраняет каждую найденную часть в папку тестов
5. Разбивает найденную часть снова на 8 равных частей и повторяет поиск
6. Продолжает процесс, пока элемент не будет занимать около 80% части или пока размер квадрата не станет меньше размера элемента
7. Находит координаты центра элемента и рисует красную точку размером 4 пикселя
8. Сохраняет результат с отмеченным элементом и координатами

### 2. Управление компьютером (robot_controller.py)

Скрипт использует Anthropic API (Claude) с функцией Computer use для управления компьютером:

1. Делает скриншот экрана
2. Находит элементы на скриншоте используя find_element.py
3. Передает координаты найденного элемента в Anthropic API
4. Управляет мышкой для клика по найденным координатам
5. Выполняет различные действия - ввод текста, нажатие клавиш, выполнение bash-команд

### 3. Интерактивное управление (main.py)

Основной скрипт позволяет пользователю выбирать режимы работы:

1. Делает скриншот экрана для дальнейшего анализа
2. Демонстрирует поиск элемента на скриншоте
3. Позволяет взаимодействовать с Anthropic API, передавая найденные координаты
4. Запускает стандартный рабочий процесс

## Требования

Для работы скриптов необходимы следующие пакеты:
```
numpy==1.26.2
pillow==10.1.0
requests==2.31.0
pyautogui==0.9.54
```

Вы можете установить их с помощью:
```bash
pip install -r requirements.txt
```

## Настройка

Перед использованием необходимо:
1. Создать файл `api_key.txt` и добавить в него ваши ключи API в формате JSON:
   ```json
   {
       "openai": "YOUR_OPENAI_API_KEY",
       "anthropic": "YOUR_ANTHROPIC_API_KEY"
   }
   ```
2. Для поиска элемента:
   - Сделать скриншот экрана (автоматически или вручную) в файл `screen.png`
   - Подготовить изображение искомого элемента и сохранить в файл `element.png`

Файл `api_key.txt` добавлен в `.gitignore`, чтобы не публиковать ваши ключи в репозитории.

## Запуск

### Основной интерактивный режим:
```bash
python main.py
```
Этот режим позволит вам выбрать действия через интерактивное меню.

### Только для поиска элемента:
```bash
python find_element.py
```

### Только для стандартного процесса с управлением компьютером:
```bash
python robot_controller.py
```

## Результаты

Скрипт поиска элемента создает новую папку с уникальным номером в директории `tests/` и сохраняет в ней:
- Промежуточные квадраты поиска
- Результирующее изображение с красной точкой
- Файл с координатами элемента
- Информационный файл о тесте

Координаты также сохраняются в корневой папке в файл `last_coordinates.txt`

## Примеры использования

1. **Поиск кнопки на интерфейсе и клик по ней**:
   - Сделайте скриншот интерфейса
   - Подготовьте изображение кнопки
   - Запустите main.py и выберите опции для поиска и взаимодействия

2. **Автоматическое заполнение форм**:
   - Скрипт находит поля ввода на форме
   - Кликает по ним и вводит нужный текст

3. **Навигация по многошаговым процессам**:
   - Находит и кликает по элементам в определенной последовательности
   - Может имитировать сложные действия пользователя

## Автор

Иван Пасичнык 